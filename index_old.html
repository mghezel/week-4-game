<!DOCTYPE html>
<html>
<head>
  <title>Crystal Collector</title>
  
  <style type="text/css">

    .different-image {
      width: 70px;
      height: 70px;
      padding: 4px;
      margin-right: 4px;
     
    }

    .game-rules {
    background-color: lightgrey;
    width: 300px;
    border: 10px darkgrey;
    padding: 25px;
    margin: 10px;
    }

    .numbers {
    -webkit-column-count: 3; /* Chrome, Safari, Opera */
    -moz-column-count: 3; /* Firefox */
    column-count: 3;
    -webkit-column-gap: 10px; /* Chrome, Safari, Opera */
    -moz-column-gap: 10px; /* Firefox */
    column-gap: 10px;
    background-color: lightgreen;
    width: 300px;
    padding: 25px;
    margin: 10px;
    }

    
  </style>

</head>
<body>

    <div class="game-rules">

      <p>You will be given a random number at the start of the game.</p><p>There are 4 crystals below. By clicking on each crystal you will add some points to your total score.</p><p>You win the game by matching your total score tothe random number or lose if your total score goes above the target random number.</p><p>The value of the crystal is hidden from you until you click on that.</p><p>The value of the target number and each crystal reset to the new value when the game starts.
    </div>
  
  <div class="numbers">
    Target Number: <span id="number-to-guess"></span>
    <p>Wins: <span id="win"></span></p>
    <p>Losses: <span id="loss"></span></p>
  </div>

  <!-- Note that this div is now empty. We will fill it dynamically -->
  <div id="pics">
  </div>

  <!-- JAVASCRIPT  -->
  <!-- ========================================= -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <script type="text/javascript">

  function getRandom(min, max) {
    return Math.floor(Math.random() * (max - min)) + min;
  }

  function target(){
  
    $("#number-to-guess").text(targetNumber);
  }

  var setInit = {

      counter: 0,
      wins: 0,
      losses: 0,
      numberOptions : [10, 5, 3, 7],
      srcLink : ["http://cdn.playbuzz.com/cdn/35910209-2844-45c0-b099-f4d82878d54f/00261fda-4062-4096-81fd-8cf96b9034e8.jpg"]
  };

  //alert("setInit.counter" + setInit.numberOptions.length);

 
  //setInit();
 
  
  // array of the images and object instead of function setInit

  // Next we create a for loop to create crystals for every numberOption.

  function arrangeImage(){

    for (var i = 0; i < setInit.numberOptions.length; i++) {

      //var random = Math.floor(Math.random() * 12) + 1;

      // For each iteration, we will create an imageCrystal
      var diffImage = $("<img>");

      // First each crystal will be given the class ".crystal-image".
      // This will allow the CSS to take effect.
      diffImage.addClass("different-image");

      // Each imageCrystal will be given a src link to the crystal image
      diffImage.attr("src", setInit.srcLink);

      // Each imageCrystal will be given a data attribute called data-crystalValue.
      // This data attribute will be set equal to the array value.
      //imageCrystal.attr("data-crystalvalue", random);

      // Lastly, each crystal image (with all it classes and attributes) will get added to the page.
      $("#pics").append(diffImage);

   }
  }

  var targetNumber = getRandom(19,120);
  target();
  arrangeImage();

  //$(document).ready(function() {

  // This time, our click event applies to every single crystal on the page. Not just one.
      $(".different-image").on("click", function() {

        
        var random = getRandom(1,12);
        var diffImage = $("<img>");
  
        diffImage.attr("data-crystalvalue", random);
        
        //var crystalValue = ($(this).attr("data-crystalvalue"));
        var crystalValue = diffImage.attr("data-crystalvalue");
        crystalValue = parseInt(crystalValue);
        // We then add the crystalValue to the user's "counter" which is a global variable.
        // Every click, from every crystal adds to the global counter.
        setInit.counter += crystalValue;

        // All of the same game win-lose logic applies. So the rest remains unchanged.
        alert("New score: " + setInit.counter);

        if (setInit.counter === targetNumber) {
          //alert("You win!");
          setInit.wins++;
          $("#win").text(setInit.wins);
        }

        else if (setInit.counter >= targetNumber) {
          //alert("You lose!!");
          setInit.losses++;
          $("#loss").text(setInit.losses);
        }

      });

  //  });

  </script>
</body>
</html>
